From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: NexusNotes <build@nexusnotes.ai>
Date: Sun, 13 Jul 2025 00:15:00 +0000
Subject: [PATCH] feat: three-pane layout, resizable panes, dark-mode toggle

---
 src/app.html                          |  2 +-
 src/lib/components/ContextPane.svelte | 13 ++++++
 src/lib/components/EditorPane.svelte  | 19 +++++++++
 src/lib/components/Sidebar.svelte     | 40 ++++++++++++++++++
 src/lib/stores/theme.ts               | 17 ++++++++
 src/lib/stores/ui.ts                  |  5 +++
 src/routes/+layout.svelte             | 18 +++++++++
 src/routes/+page.svelte               | 59 +++++++++++++++++++++++++--
 src/routes/styles.css                 |  3 ++
 svelte.config.js                      |  3 ++
 tailwind.config.js                    |  2 +-
 11 files changed, 176 insertions(+), 5 deletions(-)
 create mode 100644 src/lib/components/ContextPane.svelte
 create mode 100644 src/lib/components/EditorPane.svelte
 create mode 100644 src/lib/components/Sidebar.svelte
 create mode 100644 src/lib/stores/theme.ts
 create mode 100644 src/lib/stores/ui.ts
 create mode 100644 src/routes/+layout.svelte
 create mode 100644 src/routes/styles.css

diff --git a/src/app.html b/src/app.html
index 8b13789..2f83674 100644
--- a/src/app.html
+++ b/src/app.html
@@ -1 +1 @@
-
+<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%sveltekit.assets%/favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    %sveltekit.head%
  </head>
  <body data-sveltekit-preload-data="hover" class="h-full">
    <div style="display: contents">%sveltekit.body%</div>
  </body>
</html>
diff --git a/src/lib/components/ContextPane.svelte b/src/lib/components/ContextPane.svelte
new file mode 100644
index 0000000..6d41a5a
--- /dev/null
+++ b/src/lib/components/ContextPane.svelte
@@ -0,0 +1,13 @@
+<script lang="ts">
+  import { SunIcon, MoonIcon } from '@heroicons/svelte/24/outline';
+  import { toggleTheme } from '$lib/stores/theme';
+</script>
+
+<aside class="w-72 flex flex-col bg-gray-50 dark:bg-gray-900 border-l border-gray-200 dark:border-gray-700">
+  <header class="flex items-center justify-between p-3 border-b">
+    <span class="font-semibold text-sm">Context</span>
+    <button on:click={toggleTheme} class="p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-700">
+      <SunIcon class="h-5 w-5 dark:hidden" /> <MoonIcon class="h-5 w-5 hidden dark:block" />
+    </button>
+  </header>
+  <div class="flex-1 p-3 text-sm text-gray-600 dark:text-gray-400">Backlinks & suggestions will appear here.</div>
+</aside>
diff --git a/src/lib/components/EditorPane.svelte b/src/lib/components/EditorPane.svelte
new file mode 100644
index 0000000..85e3b0f
--- /dev/null
+++ b/src/lib/components/EditorPane.svelte
@@ -0,0 +1,19 @@
+<script lang="ts">
+  export let title = 'Untitled';
+</script>
+
+<main class="flex-1 flex flex-col bg-white dark:bg-gray-950">
+  <header class="border-b border-gray-200 dark:border-gray-700 px-4 py-2">
+    <input
+      type="text"
+      class="w-full bg-transparent focus:outline-none text-lg font-semibold"
+      bind:value={title}
+    />
+  </header>
+
+  <!-- Tiptap placeholder -->
+  <div class="flex-1 p-4">
+    <div contenteditable="true" class="prose dark:prose-invert max-w-none">
+      Start writing in Markdown‚Ä¶
+    </div>
+  </div>
+</main>
diff --git a/src/lib/components/Sidebar.svelte b/src/lib/components/Sidebar.svelte
new file mode 100644
index 0000000..e0d3a5c
--- /dev/null
+++ b/src/lib/components/Sidebar.svelte
@@ -0,0 +1,40 @@
+<script lang="ts">
+  import { Bars3Icon } from '@heroicons/svelte/24/outline';
+  import { sidebarWidth } from '$lib/stores/ui';
+
+  const toggle = () => sidebarWidth.update(w => (w === 0 ? 256 : 0));
+</script>
+
+<aside
+  class="bg-gray-100 dark:bg-gray-900 border-r border-gray-200 dark:border-gray-700
+         transition-all duration-200 ease-in-out"
+  style="width: {$sidebarWidth}px"
+>
+  <header class="flex items-center justify-between p-3 border-b">
+    <span class="font-bold text-sm">Nexus Tree</span>
+    <button on:click={toggle} class="lg:hidden">
+      <Bars3Icon class="h-5 w-5" />
+    </button>
+  </header>
+
+  <nav class="p-2 space-y-1">
+    <!-- Placeholder tree nodes -->
+    <div class="px-2 py-1 text-sm rounded hover:bg-gray-200 dark:hover:bg-gray-800 cursor-pointer">
+      üìÅ Personal
+    </div>
+    <div class="px-2 py-1 ml-4 text-sm rounded hover:bg-gray-200 dark:hover:bg-gray-800 cursor-pointer">
+      üìù Untitled
+    </div>
+  </nav>
+</aside>
diff --git a/src/lib/stores/theme.ts b/src/lib/stores/theme.ts
new file mode 100644
index 0000000..b0aa684
--- /dev/null
+++ b/src/lib/stores/theme.ts
@@ -0,0 +1,17 @@
+import { writable } from 'svelte/store';
+
+const stored = typeof localStorage !== 'undefined' ? localStorage.getItem('theme') : null;
+export const theme = writable<'light' | 'dark'>(stored === 'dark' ? 'dark' : 'light');
+
+theme.subscribe((t) => {
+  if (typeof document !== 'undefined') {
+    document.documentElement.classList.toggle('dark', t === 'dark');
+    localStorage.setItem('theme', t);
+  }
+});
+
+export function toggleTheme() {
+  theme.update((t) => (t === 'light' ? 'dark' : 'light'));
+}
diff --git a/src/lib/stores/ui.ts b/src/lib/stores/ui.ts
new file mode 100644
index 0000000..f2d3d3d
--- /dev/null
+++ b/src/lib/stores/ui.ts
@@ -0,0 +1,5 @@
+import { writable } from 'svelte/store';
+
+// Sidebar width in px; 0 = collapsed on small screens
+export const sidebarWidth = writable(256);
diff --git a/src/routes/+layout.svelte b/src/routes/+layout.svelte
new file mode 100644
index 0000000..8d3edfb
--- /dev/null
+++ b/src/routes/+layout.svelte
@@ -0,0 +1,18 @@
+<script>
+  import '$lib/stores/theme'; // runs once to set dark class
+  import './styles.css';
+</script>
+
+<svelte:head>
+  <title>NexusNotes</title>
+</svelte:head>
+
+<div class="h-screen flex flex-col bg-white dark:bg-gray-950">
+  <slot />
+</div>
diff --git a/src/routes/+page.svelte b/src/routes/+page.svelte
index 5982b0a..c7f0f21 100644
--- a/src/routes/+page.svelte
+++ b/src/routes/+page.svelte
@@ -1,2 +1,55 @@
-<h1>Welcome to SvelteKit</h1>
-<p>Visit <a href="https://kit.svelte.dev">kit.svelte.dev</a> to read the documentation</p>
+<script lang="ts">
+  import Sidebar from '$lib/components/Sidebar.svelte';
+  import EditorPane from '$lib/components/EditorPane.svelte';
+  import ContextPane from '$lib/components/ContextPane.svelte';
+  import { Pane, Splitpanes } from 'svelte-splitpanes';
+</script>
+
+<Splitpanes theme="modern" class="h-full w-full">
+  <Pane minSize={10} maxSize={40}>
+    <Sidebar />
+  </Pane>
+
+  <Pane minSize={30}>
+    <EditorPane />
+  </Pane>
+
+  <Pane minSize={15} maxSize={40}>
+    <ContextPane />
+  </Pane>
+</Splitpanes>
diff --git a/src/routes/styles.css b/src/routes/styles.css
new file mode 100644
index 0000000..b5c61c9
--- /dev/null
+++ b/src/routes/styles.css
@@ -0,0 +1,3 @@
+@tailwind base;
+@tailwind components;
+@tailwind utilities;
diff --git a/svelte.config.js b/svelte.config.js
index 1234567..c7a0db2 100644
--- a/svelte.config.js
+++ b/svelte.config.js
@@ -1 +1,4 @@
+import adapter from '@sveltejs/adapter-static';
 export default {
+  kit: { adapter: adapter({ fallback: 'index.html' }) }
+};
diff --git a/tailwind.config.js b/tailwind.config.js
index 1234567..bfe0bc2 100644
--- a/tailwind.config.js
+++ b/tailwind.config.js
@@ -1 +1 @@
-
+/** @type {import('tailwindcss').Config} */
+export default {
+  content: ['./src/**/*.{html,js,svelte,ts}'],
+  darkMode: 'class',
+  theme: { extend: {} },
+  plugins: [require('@tailwindcss/typography')]
+};